# NMAP
###### Nmap ("Network Mapper") is a free and open source utility for network discovery and security auditing. Nmap is a basic tool for performing horizontal (network-wide) or vertical (host-specific) network scans

Basic with output, it will create a gnmap, nmap and xml file
```
	• nmap -v 192.168.152.0/24 -oA output
```

Stealth scanning (TCP SYN) starts the connection with a SYN but does not end it with ACK, it is fast and silent:
```
	• nmap -sS   192.168.152.0/24
```

Scanning useful for initial phase of discovering host, makes a ping to all the machines of the network announced. As it is only a ping it is quite stealthy:
```
	• nmap -v -sn 192.168.152.0/24
```

TCP connect scan, which is louder than the previous one, gives basic information:
```
	• nmap -v -sT  192.168.152.0/24
```

So you can try to know the operating system:
```
	• nmap -O 192.168.152.130
```

So to see the version of the devices, load 47 scripts to see the versions of the services:
```
	• nmap -sV 192.168.152.130
```

To view services, version, operating system, hostname and even try some anonymous access, load 147 scripts, (like -sV , -O, --traceroute y -sC):
```
	• nmap -A 192.168.152.130
```

Ping sweep:
```
	• nmap -sP 192.168.152.0/24
```

Noisy but brings out a lot of information: 
```
	• nmap -A -v -d -p- 192.168.152.130
	• nmap -A -v -d -p1-65535 192.168.152.130
```

To bypass the firewall by splitting the packets:
```
-f : 8 bytes
-f -f: 16 bytes
-mtu nª: por el numero que elija el usuario
```

These are the NSE which are collections of scripts each based on a different attack or recognition:
```
	• https://nmap.org/nsedoc/categories/exploit.html
	• nmap -v -sS -sV --script auth 192.168.152.130
	• nmap -v --script vuln 192.168.152.130
	• nmap -v -d -sV -p 53,80,139,445 --script dos 192.168.152.130
	• nmap -v -sV -p 21,22,23,80,2121,3306,3389 --script brute 192.168.152.130
	• nmap -v -d -p 21,80,139,445 --script exploit 192.168.152.130
```

My favourite scan that gives more information and a lot of noise is :
-v            --> verbose
-d            --> debbug
-A            --> many scripts like -sV , -O, --traceroute and -sC
-sS           --> TCP SYN scan
-f -f         --> fragments 16byte packets into 16bytes to avoid the firewall
-p-           --> for all ports (0 to 65535)
--script vuln --> to remove vulnerabilities from typical services
-oA           --> to make an output in xml for metasploit or in nmap or gnmap to see it graphically

```
	• nmap -v -d -A -sS -f -f -p- --script vuln 192.168.152.131 -oA output_file
```

